<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Restaurant IA V3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;      /* Fond principal (ardoise fonc√©e) */
            --bg-surface: #1e293b; /* Fond des cartes (ardoise plus claire) */
            --border-color: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-blue: #38bdf8;
            --accent-purple: #a78bfa;
            --accent-orange: #f97316;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
        }
        .page {
            animation: fadeIn 0.4s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .nav-button {
            @apply flex items-center gap-4 px-4 py-3 rounded-lg text-lg font-semibold text-text-secondary transition-all duration-200 hover:bg-slate-700 hover:text-white;
        }
        .nav-button.active {
            @apply bg-sky-500/10 text-accent-blue shadow-inner;
        }
        .main-card {
            @apply bg-bg-surface p-6 rounded-xl border border-border-color shadow-lg;
        }
        .page-header {
            @apply text-3xl font-bold text-white mb-6 flex items-center gap-3;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="flex">
        <aside id="sidebar" class="w-72 bg-bg-surface h-screen sticky top-0 border-r border-border-color p-6 flex flex-col">
            <div class="text-2xl font-extrabold mb-10">
                <span class="align-middle">üçΩÔ∏è Restaurant IA</span>
            </div>
            <nav class="flex flex-col space-y-3">
                <button id="home-nav" class="nav-button active" onclick="showPage('home')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    <span>Accueil</span>
                </button>
                <button id="planning-nav" class="nav-button" onclick="showPage('planning')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>
                    <span>Planning</span>
                </button>
                <button id="hours-nav" class="nav-button" onclick="showPage('hours')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    <span>Heures R√©elles</span>
                </button>
            </nav>
            <div class="mt-auto">
                <div class="p-4 rounded-lg bg-slate-800 text-center">
                    <p class="text-sm text-text-secondary">Pr√™t √† vous aider !</p>
                    <span class="inline-flex items-center gap-1.5 mt-2 px-3 py-1 text-xs font-semibold rounded-full text-green-300 bg-green-900">
                        <span class="size-2 bg-green-500 rounded-full animate-pulse"></span>
                        Syst√®me en ligne
                    </span>
                </div>
            </div>
        </aside>

        <main class="flex-1 p-8">
            <div id="home-page" class="page">
                <h1 class="page-header"><span class="text-accent-blue">ü§ñ</span> Assistant IA</h1>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="main-card">
                        <p class="text-text-secondary font-semibold">Employ√©s Actifs</p>
                        <p id="stat-employees" class="text-4xl font-bold mt-2">5</p>
                    </div>
                    <div class="main-card">
                        <p class="text-text-secondary font-semibold">Heures Totales / Semaine</p>
                        <p id="stat-total-hours" class="text-4xl font-bold mt-2">195h</p>
                    </div>
                    <div class="main-card">
                        <p class="text-text-secondary font-semibold">Heures Supp. / Semaine</p>
                        <p id="stat-overtime" class="text-4xl font-bold text-amber-400 mt-2">20h</p>
                    </div>
                </div>

                <div class="main-card h-[60vh] flex flex-col">
                    <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
                        <div class="p-4 rounded-lg bg-slate-800 max-w-lg">
                            <strong class="font-semibold">Bonjour !</strong> Je suis votre assistant.
                            <br>Posez-moi une question ou dictez des heures.
                            <p class="text-xs text-text-secondary mt-2">Ex: "Cr√©e le planning de la semaine prochaine" ou "Qui travaille ce soir ?"</p>
                        </div>
                    </div>
                    <div class="p-4 border-t border-border-color">
                        <div class="flex items-center gap-4">
                            <input id="message-input" type="text" class="w-full bg-slate-800 p-4 rounded-lg border border-transparent focus:border-accent-blue focus:outline-none" placeholder="Votre message √† l'IA...">
                            <button id="send-btn" class="size-14 rounded-lg bg-accent-blue text-white flex items-center justify-center shrink-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="planning-page" class="page hidden">
                <h1 class="page-header"><span class="text-accent-purple">üìÖ</span> Planning de la Semaine</h1>
                <div class="main-card">
                    <div class="flex justify-start gap-4 mb-6">
                        <button class="px-5 py-2 bg-purple-600 font-semibold rounded-lg hover:bg-purple-700">G√©n√©rer avec l'IA</button>
                        <button class="px-5 py-2 bg-slate-600 font-semibold rounded-lg hover:bg-slate-700">Exporter</button>
                    </div>
                    <div id="planning-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        </div>
                </div>
            </div>

            <div id="hours-page" class="page hidden">
                <h1 class="page-header"><span class="text-accent-orange">‚è±Ô∏è</span> Suivi des Heures R√©elles</h1>
                <div class="main-card">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-slate-800 p-4 rounded-lg">
                            <p class="text-text-secondary font-semibold">Total Heures Semaine</p>
                            <p id="hours-total" class="text-3xl font-bold mt-1">195h</p>
                        </div>
                        <div class="bg-slate-800 p-4 rounded-lg">
                            <p class="text-text-secondary font-semibold">Total Heures Suppl√©mentaires</p>
                            <p id="hours-overtime" class="text-3xl font-bold text-amber-400 mt-1">20h</p>
                        </div>
                    </div>
                    <div id="employees-hours-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const elements = {
            pages: document.querySelectorAll('.page'),
            navButtons: document.querySelectorAll('.nav-button'),
            // Page Accueil
            statEmployees: document.getElementById('stat-employees'),
            statTotalHours: document.getElementById('stat-total-hours'),
            statOvertime: document.getElementById('stat-overtime'),
            chatMessages: document.getElementById('chat-messages'),
            messageInput: document.getElementById('message-input'),
            sendBtn: document.getElementById('send-btn'),
            // Page Planning
            planningGrid: document.getElementById('planning-grid'),
            // Page Heures
            hoursTotal: document.getElementById('hours-total'),
            hoursOvertime: document.getElementById('hours-overtime'),
            employeesHoursGrid: document.getElementById('employees-hours-grid'),
        };

        function showPage(pageId) {
            // Cacher toutes les pages
            elements.pages.forEach(page => page.classList.add('hidden'));
            // Afficher la page s√©lectionn√©e
            document.getElementById(`${pageId}-page`).classList.remove('hidden');

            // Mettre √† jour l'√©tat actif des boutons de navigation
            elements.navButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.id === `${pageId}-nav`) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateUI(data) {
            const { employees, planning, dashboard } = data;
            
            // --- MISE √Ä JOUR PAGE ACCUEIL ---
            elements.statEmployees.textContent = employees.length;
            elements.statTotalHours.textContent = `${dashboard.totalHeures}h`;
            elements.statOvertime.textContent = `${dashboard.totalHeuresSupp}h`;

            // --- MISE √Ä JOUR PAGE PLANNING ---
            const days = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];
            elements.planningGrid.innerHTML = days.map(day => {
                const dayShifts = planning.filter(p => p.day === day);
                return `
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <h3 class="font-bold text-center">${day}</h3>
                        <div class="space-y-2 mt-2">
                        ${dayShifts.map(shift => `
                            <div class="bg-slate-900 p-2 rounded-md text-sm">
                                <p class="font-semibold text-text-secondary">${shift.service} <span class="text-xs">(${shift.heures})</span></p>
                                <p class="text-xs text-purple-300">${shift.employes.join(', ')}</p>
                            </div>
                        `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
            
            // --- MISE √Ä JOUR PAGE HEURES ---
            elements.hoursTotal.textContent = `${dashboard.totalHeures}h`;
            elements.hoursOvertime.textContent = `${dashboard.totalHeuresSupp}h`;
            elements.employeesHoursGrid.innerHTML = employees.map(emp => `
                <div class="bg-slate-800 p-4 rounded-lg">
                    <div class="flex justify-between items-center">
                        <h4 class="text-lg font-bold">${emp.nom}</h4>
                        ${emp.heuresSupp > 0 ? `<span class="px-2 py-1 text-xs font-bold text-amber-800 bg-amber-400 rounded-full">+${emp.heuresSupp}h</span>` : ''}
                    </div>
                    <p class="text-sm text-text-secondary">${emp.role}</p>
                    <p class="mt-3 text-2xl font-semibold">${emp.heuresSemaine}h <span class="text-base text-text-secondary">/ ${emp.heuresContrat}h</span></p>
                </div>
            `).join('');
        }
        
        // Simuler la r√©ception de donn√©es
        function getSimulatedData() {
            const employees = [
                { id: '1', nom: 'Vanessa', role: 'Serveur', heuresContrat: 35, heuresSemaine: 39, heuresSupp: 4 },
                { id: '2', nom: 'Sarah', role: 'Cuisine', heuresContrat: 35, heuresSemaine: 42, heuresSupp: 7 },
                { id: '3', nom: 'Oscar', role: 'Plongeur', heuresContrat: 35, heuresSemaine: 38, heuresSupp: 3 },
                { id: '4', nom: 'Louis', role: 'Cuisine', heuresContrat: 35, heuresSemaine: 35, heuresSupp: 0 },
                { id: '5', nom: 'Alexis', role: 'Serveur', heuresContrat: 35, heuresSemaine: 41, heuresSupp: 6 }
            ];
            const planning = [
                { day: 'Lundi', service: 'Soir', employes: ['Vanessa', 'Sarah', 'Oscar', 'Alexis'], heures: '18h-23h' },
                { day: 'Mardi', service: 'Soir', employes: ['Vanessa', 'Louis', 'Oscar', 'Alexis'], heures: '18h-23h' },
                // ... autres shifts
            ];
            const dashboard = { totalHeures: 195, totalHeuresSupp: 20 };
            return { employees, planning, dashboard };
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home');
            const appData = getSimulatedData();
            updateUI(appData);

            elements.sendBtn.addEventListener('click', () => {
                const input = elements.messageInput;
                if(input.value.trim() === '') return;

                // Ajouter le message de l'utilisateur
                elements.chatMessages.innerHTML += `<div class="flex justify-end"><div class="p-3 rounded-lg bg-blue-600 max-w-md text-right">${input.value}</div></div>`;
                
                // Simuler une r√©ponse de l'IA
                setTimeout(() => {
                    elements.chatMessages.innerHTML += `<div class="flex justify-start"><div class="p-3 rounded-lg bg-slate-800 max-w-md">Action effectu√©e. Le planning a √©t√© mis √† jour.</div></div>`;
                    // Recharger les donn√©es pour refl√©ter le changement
                    updateUI(getSimulatedData());
                }, 1000);
                
                input.value = '';
                elements.chatMessages.scrollTop = elements.chatMessages.scrollHeight;
            });
        });
    </script>
</body>
</html>
